{"componentChunkName":"component---src-templates-post-js","path":"/basic-authentication-for-an-express-node-app-htpasswd/","webpackCompilationHash":"","result":{"data":{"markdownRemark":{"html":"<p>I was struggling to find a simple way to add username and password authentication to a Node.js app running on an Express server, like <strong>.htpasswd</strong> for Apache. Finally, a <a href=\"https://stackoverflow.com/questions/23616371/basic-http-authentication-with-node-and-express-4\">StackOverflow</a> answer helped me out.</p>\n<p>To start, install the <a href=\"https://www.npmjs.com/package/basic-auth\">basic-auth</a> package:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> basic-auth</code></pre></div>\n<p>Create an <strong>auth.js</strong> with the following code, changing <code class=\"language-text\">username</code> and <code class=\"language-text\">password</code> to whatever you want.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> auth <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'basic-auth'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> admins <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> username<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> password<span class=\"token punctuation\">:</span> <span class=\"token string\">'password'</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">,</span> next</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> user <span class=\"token operator\">=</span> <span class=\"token function\">auth</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>user <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>admins<span class=\"token punctuation\">[</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> admins<span class=\"token punctuation\">[</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>password <span class=\"token operator\">!==</span> user<span class=\"token punctuation\">.</span>pass<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    response<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'WWW-Authenticate'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Basic realm=\"example\"'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">401</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And in <strong>server.js</strong>, include this at the top of your file.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> auth <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./auth'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>auth<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Make sure to hide <strong>auth.js</strong> with a <strong>.gitignore</strong> file, and you're all set!</p>","timeToRead":1,"excerpt":"I was struggling to find a simple way to add username and password authentication to a Node.js app running on an Express server, likeâ€¦","frontmatter":{"title":"Basic Authentication for an Express Node App (htpasswd)","thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAD7klEQVQ4y3VUXWwUVRSebgntk2888SAvvhlD+JVm596Z7Vai1FQk1qISkSVYH4A2UAUV+kCNpe1u95dtS6P1B+mGJobaGBMakt2Z2e4Wu7SEtJqS4DaKhAQ0KKF0mT2ec2emHUic5CT33jnnOz/fOUeS8Dtr7JbCmkpHKa7VS706r5TsL6rVrQ3rylhY57+GdZ/XeQ/pbFVErxPnoOaVBifelr4ymiUpotc6OhIaerqzGyroHMs0VOH9UwT/NzGlQiyvCMG3ryO6/1nHhpzH9Xr7bAVFoBUh3Vu5Aqw2ouJ8/zUfRCY49OrsMYpJ0jfjA3LSi84S2mvVpN9lrK9AG49jXOEC2oSpjScLPohfUQhoyQYCW8oopUiWQ78FPE/Ol+0NxcKKaP41mEoyjIrJqz4noscuELeA7WQpPqnAmYJKwONY3/Wu2qlDQ/MvOUAll6EbREjYeOKN9JfOXq8l0Ju5uREnbeWC5Umk6ALiSAIHN2AwLUAdYBEt1Rn1FlJTB6ttUpRhShWVrOg0MlBcUSkQyjCITTI4PsQgcFyGSI7RWxltzGiOdHlx5GrraitCTUkNzmLtNFYKZ9Ewz6E7vRVCmlcAdqW3ABGRnGHQ1sdg5zsyRPNMCEZs9l2jduLF4cnWKgGI/ZX6/AcfNDTJpd3NDDrGauDLQhMs3CvA7fu/wLnpAHRe2gb7jjGo2+6FpmZZODrQLkP9Lq95JIYpG7x4fsIGTE6rqXdbVHjvQ7n0ZkCBPZ88D3N/j8KNO1mY/fMS3Fq8Age6XoCdb3H4oEOGNwIynBxmsP0VGfYe5eb+j7E0Gi9enD1sASZ+VlLvn1ShPcVKLWEF9p/aAJcXOuGfh/fgweJfkL81CEe/2AgNjZyygL1tMnT+xGDH6zLsOWTVEIkpDoy2VDksp+J5rCGSEkJCei5z6NFehO+vt8HYXDv0ZLaJep34jsGhHlkQRPeOUbwHZbNXwxpmefGbdOsy4Pm+adHQgmUkpkzt0pXeDKfTG6k+omZRZDkxZbUNElhGpsuJAjdjk4LlmyPTKxFeHJz1k9FD16hhSyjliKGu9KFmtcpyYyMo3h/R8sAA7l6YOrLamRQfeviN5pPa43+m5empEQvDyowvYlCt9sphYqATWkM1Prbjzwd2+qZrnuGpOS6dsVca2pzDdbaOMD7LPOfsNMWzPNeafx0qfUvKZGRHa9qAS/RuR5XDhcBX9qJsrT9k1R4/P+5EeZVrYXA0miDjKEWCRPTPiCXwB/4LOHpBo6YSgT32XpSkgUwjrq9aqdvYYgP5PEG9xr1s9yHI7xjdI4z8dEx/+Rl6/ygnyKz8cXzAWdJYtlel/wBpYSjkeHzknAAAAABJRU5ErkJggg==","width":150,"height":150,"src":"/static/517c02bd875932e2a959488763695b28/4148e/node.png","srcSet":"/static/517c02bd875932e2a959488763695b28/4148e/node.png 1x"}}},"slug":"basic-authentication-for-an-express-node-app-htpasswd","date":"2017-11-13T00:00:00.000Z","categories":["JavaScript"],"tags":["authentication","express","node"],"template":"post"},"fields":{"slug":"/basic-authentication-for-an-express-node-app-htpasswd/","date":"2017-11-13T00:00:00.000Z"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/basic-authentication-for-an-express-node-app-htpasswd/"}}}