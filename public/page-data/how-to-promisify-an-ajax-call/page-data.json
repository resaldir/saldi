{"componentChunkName":"component---src-templates-post-js","path":"/how-to-promisify-an-ajax-call/","webpackCompilationHash":"","result":{"data":{"markdownRemark":{"html":"<p>Let's say you have an AJAX call, and some other function that depends on the AJAX call loading before it runs.</p>\n<p>Here's the AJAX function.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">doTheThing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  $<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    url<span class=\"token punctuation\">:</span> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">,</span>\n    type<span class=\"token punctuation\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n    data<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      key<span class=\"token punctuation\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">success</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">error</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>And you might call the two functions in succession, and find that the second function doesn't work, because it depends on the first one.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">doTheThing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">doSomethingElse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>We can quickly and easily rewrite this with a <code class=\"language-text\">Promise</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">doTheThing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    $<span class=\"token punctuation\">.</span><span class=\"token function\">ajax</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      url<span class=\"token punctuation\">:</span> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">,</span>\n      type<span class=\"token punctuation\">:</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">,</span>\n      data<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        key<span class=\"token punctuation\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">success</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">error</span><span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now we can do the AJAX call, run the success function, and follow it up with any subsequent code.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">doTheThing</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">data</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">doSomethingElse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>And that's it!</p>","timeToRead":1,"excerpt":"Let's say you have an AJAX call, and some other function that depends on the AJAX call loading before it runs. Here's the AJAX function. Andâ€¦","frontmatter":{"title":"How to Promisify an Ajax Call","thumbnail":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACbElEQVQ4y+2V30tTYRjH90cECVpZRhdunf208sfWZjnn3NnOjOgiugkCqYusbqIuI+hGKiSQMiQQIjChbnMXQj+uEmphntTSSmc4z9kqzUz37Xmfs01HaiO87OLh7Ox9n8/7fL/P83JM+kgE2up4F/6n0LNPk5592awwaf+Bhsly/reu5tbkggbouX25dXUTKtTUwgP0Yrs8OyxzaOrqd6Oq5NuV/4sGLnyMcDCMkhcmIhxfR8NY/Kzg+/tIHmraSE5qJIyZIRkX22rQdroaibhMYAVPev04eWI/omEXLl+ohfqiGd/GDOi6HmqqjDQBp9+E4HbbYXdYkSSpg7EA9koSJKuEpkYntpRU4sypA5j7EOHqNwSmGChTogN1dTZOunPDi62lleju8AF6Cx501SM+0MTytb9JTmeBjX4HamtsnPS45zC2lZtxtKUKsb4G/JpUsEQhGqUXA/xCwIDfybKFh6Lqs63VKCPozt0WBg888uPHRFby2mNiPFMUiXiIKnTC47Fj8lWIOyqk93YfwvFj+xjqdFkx2B/A3HjkT+AseSdGQszXPG1Ik8wAeegmD4V8IVt9HgSSUWAmiutXPSgpM6Pj2kEsJ6IGUDQgN7DilP6HDexbT6ePfZJsEsl2MOwcjY+rysrNGH4WxKXzNdykrpteLE0phRUK4HwWaLNLbP6OXRZU7LFwQiah4N4tX36tvMKC0u1mHFFcGH/ZjPTYGpI18u8n3Qpxeme7lyXF+vzsnbhqi58UDD0N4i4d0H7Fg/u36zH12vB2/abQgtiwTBVlyBdxO1buMa1RU4S8zHSUxyY9asDE5+Q3DE1/m6OVCiYAAAAASUVORK5CYII=","width":150,"height":150,"src":"/static/958cb5fcf40d0196ffc68166b4dc1522/4148e/js.png","srcSet":"/static/958cb5fcf40d0196ffc68166b4dc1522/4148e/js.png 1x"}}},"slug":"how-to-promisify-an-ajax-call","date":"2018-08-08T00:00:00.000Z","categories":["JavaScript"],"tags":["es6","javascript","jQuery","promise"],"template":"post"},"fields":{"slug":"/how-to-promisify-an-ajax-call/","date":"2018-08-08T00:00:00.000Z"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/how-to-promisify-an-ajax-call/"}}}